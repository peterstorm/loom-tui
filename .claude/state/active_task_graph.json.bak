{
  "current_phase": "execute",
  "phase_artifacts": {
    "brainstorm": ".claude/specs/2026-02-11-loom-tui/brainstorm.md",
    "specify": ".claude/specs/2026-02-11-loom-tui/spec.md",
    "clarify": ".claude/specs/2026-02-11-loom-tui/spec.md",
    "architecture": "/home/peterstorm/dev/rust/.claude/plans/2026-02-11-loom-tui.md",
    "decompose": "task_graph"
  },
  "skipped_phases": [],
  "spec_dir": ".claude/specs/2026-02-11-loom-tui",
  "spec_file": "/home/peterstorm/dev/rust/.claude/specs/2026-02-11-loom-tui/spec.md",
  "plan_file": "/home/peterstorm/dev/rust/.claude/plans/2026-02-11-loom-tui.md",
  "tasks": [
    {
      "id": "T1",
      "description": "Create project scaffold with Cargo.toml, flake.nix, src/main.rs stub, src/lib.rs",
      "agent": "dotfiles-agent",
      "wave": 1,
      "depends_on": [],
      "spec_anchors": [
        "FR-009"
      ],
      "new_tests_required": false,
      "plan_context": "Phase 1: Foundation - Project scaffold with dependencies. Nix flake for development shell and build.",
      "file_list": [
        "Cargo.toml",
        "flake.nix",
        "src/main.rs",
        "src/lib.rs"
      ],
      "start_sha": "2270ced9f2a92f7ee2508b998d892f9e35419848",
      "status": "completed",
      "tests_passed": true,
      "test_evidence": "cargo check: compiles OK (scaffold, no tests required)",
      "files_modified": [
        "/home/peterstorm/dev/rust/.gitignore",
        "/home/peterstorm/dev/rust/Cargo.toml",
        "/home/peterstorm/dev/rust/flake.nix",
        "/home/peterstorm/dev/rust/src/lib.rs",
        "/home/peterstorm/dev/rust/src/main.rs"
      ],
      "new_tests_written": false,
      "new_test_evidence": "new_tests_required=false (skipped)",
      "review_status": "passed",
      "critical_findings": [],
      "advisory_findings": [
        "lib.rs:7-10 - Consider removing or documenting commented module placeholders",
        "main.rs:6-11 - Test boilerplate `it_works` serves no purpose, can be removed",
        "Cargo.toml - Some dependencies (notify, chrono, serde_json) may be premature for scaffold phase"
      ]
    },
    {
      "id": "T2",
      "description": "Implement all domain models in model/ (task, agent, hook_event, session, theme) with serde derives, constructors, and test fixtures",
      "agent": "code-implementer-agent",
      "wave": 1,
      "depends_on": [],
      "spec_anchors": [
        "FR-020",
        "FR-021",
        "FR-022",
        "FR-025",
        "FR-030",
        "FR-032",
        "FR-034",
        "FR-036",
        "FR-037",
        "FR-040"
      ],
      "new_tests_required": true,
      "plan_context": "Phase 1: Domain models - All immutable structs/enums with owned data. Include test fixtures.",
      "file_list": [
        "src/model/mod.rs",
        "src/model/task.rs",
        "src/model/agent.rs",
        "src/model/hook_event.rs",
        "src/model/session.rs",
        "src/model/theme.rs",
        "tests/fixtures/active_task_graph.json",
        "tests/fixtures/agent-a04.jsonl",
        "tests/fixtures/events.jsonl",
        "tests/fixtures/session_archive.json",
        "tests/model_tests.rs"
      ],
      "start_sha": "bac3a2ebcb2c0404f468f14531d2dc73a7c48fb2",
      "status": "completed",
      "tests_passed": true,
      "test_evidence": "cargo test: 14 passed (model_tests)",
      "new_tests_written": true,
      "new_test_evidence": "14 test methods in tests/model_tests.rs",
      "review_status": "passed",
      "critical_findings": [],
      "advisory_findings": [
        "agent.rs:28-41 Builder pattern mutates instead of creating new instances (acceptable in Rust but not purely immutable)",
        "task.rs:16 completed_tasks count may exclude Implemented tasks - verify domain semantics",
        "session.rs:118-139, agent.rs:114-135 Duplicated duration_opt_millis module - extract to shared location",
        "task.rs:63-73 Task::new accepts any TaskStatus - consider always initializing to Pending",
        "All models lack constructor validation for empty strings and invalid values"
      ]
    },
    {
      "id": "T3",
      "description": "Implement AppEvent enum and AppState struct with constructors",
      "agent": "code-implementer-agent",
      "wave": 1,
      "depends_on": [],
      "spec_anchors": [
        "FR-001",
        "FR-002",
        "FR-003",
        "FR-005"
      ],
      "new_tests_required": true,
      "plan_context": "Phase 1: AppEvent and AppState.",
      "file_list": [
        "src/event/mod.rs",
        "src/app/mod.rs",
        "src/app/state.rs"
      ],
      "start_sha": "bac3a2ebcb2c0404f468f14531d2dc73a7c48fb2",
      "status": "completed",
      "tests_passed": true,
      "test_evidence": "cargo test: 16 passed (state + event tests)",
      "files_modified": [
        "/home/peterstorm/dev/rust/src/app/mod.rs",
        "/home/peterstorm/dev/rust/src/app/state.rs",
        "/home/peterstorm/dev/rust/src/event/mod.rs",
        "/home/peterstorm/dev/rust/src/lib.rs"
      ],
      "new_tests_written": true,
      "new_test_evidence": "16 test methods in src/app/state.rs",
      "review_status": "passed",
      "critical_findings": [],
      "advisory_findings": [
        "Mutability in ScrollState::reset contradicts immutability-first principle (state.rs:160)",
        "AppEvent lacks constructor methods despite task description requirement (event/mod.rs)",
        "AppState constructors may not scale, consider builder pattern (state.rs:145)",
        "Instant field prevents AppState serialization if persistence needed (state.rs:51)",
        "Missing unit tests for AppEvent enum (event/mod.rs)",
        "Comment claims pure update function exists but not yet implemented (state.rs:7)"
      ]
    },
    {
      "id": "T4",
      "description": "Implement path resolution module for tmpdir, state dir, archive dir",
      "agent": "code-implementer-agent",
      "wave": 1,
      "depends_on": [],
      "spec_anchors": [
        "FR-020",
        "FR-021",
        "FR-022",
        "FR-023",
        "FR-024"
      ],
      "new_tests_required": true,
      "plan_context": "Phase 1: Path resolution - $TMPDIR/loom-tui/, .claude/state/, ~/.local/share/loom-tui/sessions/.",
      "file_list": [
        "src/paths.rs"
      ],
      "start_sha": "bac3a2ebcb2c0404f468f14531d2dc73a7c48fb2",
      "status": "completed",
      "tests_passed": true,
      "test_evidence": "cargo test: 4 passed (paths::tests)",
      "files_modified": [
        "/home/peterstorm/dev/rust/src/lib.rs",
        "/home/peterstorm/dev/rust/src/paths.rs"
      ],
      "new_tests_written": true,
      "new_test_evidence": "4 test methods in src/paths.rs",
      "review_status": "passed",
      "critical_findings": [],
      "advisory_findings": [
        "Paths struct allows invalid states - all fields public with no validation",
        "Documentation mismatch on HOME fallback behavior at line 41",
        "Missing test for HOME environment variable unset scenario",
        "Environment variable reads in constructor violate FC/IS pattern - not a pure function",
        "Repeated path joins can be extracted to reduce duplication",
        "Example in docstring uses system-specific absolute path",
        "Test helper TmpdirGuard could be extracted to reusable test utility module"
      ]
    },
    {
      "id": "T5",
      "description": "Implement pure update logic for all AppEvent variants with full unit test coverage",
      "agent": "code-implementer-agent",
      "wave": 2,
      "depends_on": [
        "T2",
        "T3"
      ],
      "spec_anchors": [
        "FR-001",
        "FR-002",
        "FR-003",
        "FR-026",
        "NFR-005",
        "NFR-010",
        "NFR-011",
        "SC-007"
      ],
      "new_tests_required": true,
      "plan_context": "Phase 2: Pure update(state, event) -> state. No I/O, fully deterministic.",
      "file_list": [
        "src/app/update.rs",
        "tests/update_tests.rs"
      ],
      "start_sha": "bac3a2ebcb2c0404f468f14531d2dc73a7c48fb2",
      "status": "completed",
      "tests_passed": true,
      "test_evidence": "cargo: 25 passed (update_tests)",
      "files_modified": [
        "/home/peterstorm/dev/rust/src/app/mod.rs",
        "/home/peterstorm/dev/rust/src/app/update.rs",
        "/home/peterstorm/dev/rust/tests/navigation_tests.rs",
        "/home/peterstorm/dev/rust/tests/update_tests.rs"
      ],
      "new_tests_written": true,
      "new_test_evidence": "25 tests in tests/update_tests.rs",
      "review_status": "passed",
      "critical_findings": [],
      "advisory_findings": [
        "Non-deterministic Utc::now() calls in pure update function at src/app/update.rs:34,42 - move timestamps to event creation",
        "Test key_event_no_op_until_t6 at tests/update_tests.rs:225 checks wrong fields (test passes but validates incorrect behavior)",
        "Ring buffer capacity check uses >= instead of == at src/app/update.rs:26,59 - minor inefficiency",
        "Test duplication between src/app/update.rs and tests/update_tests.rs - consolidate organization"
      ]
    },
    {
      "id": "T6",
      "description": "Implement pure navigation logic for view switching, focus, scroll, drill-down, quit, filter, help with unit tests",
      "agent": "code-implementer-agent",
      "wave": 2,
      "depends_on": [
        "T2",
        "T3"
      ],
      "spec_anchors": [
        "FR-007",
        "FR-008",
        "FR-050",
        "FR-051",
        "FR-052",
        "FR-053",
        "FR-054",
        "FR-055",
        "FR-056",
        "FR-057",
        "FR-058"
      ],
      "new_tests_required": true,
      "plan_context": "Phase 2: Pure navigation state transitions.",
      "file_list": [
        "src/app/navigation.rs",
        "tests/navigation_tests.rs"
      ],
      "start_sha": "bac3a2ebcb2c0404f468f14531d2dc73a7c48fb2",
      "status": "completed",
      "tests_passed": true,
      "test_evidence": "cargo: 55 passed (navigation_tests)",
      "files_modified": [
        "/home/peterstorm/dev/rust/src/app/mod.rs",
        "/home/peterstorm/dev/rust/src/app/navigation.rs",
        "/home/peterstorm/dev/rust/src/app/state.rs",
        "/home/peterstorm/dev/rust/tests/navigation_tests.rs"
      ],
      "new_tests_written": true,
      "new_test_evidence": "55 tests in tests/navigation_tests.rs",
      "review_status": "passed",
      "critical_findings": [],
      "advisory_findings": [
        "Duplicated task lookup logic in switch_to_agent_detail and drill_down functions at src/app/navigation.rs:86-105,186-206",
        "Inconsistent mutability pattern in handle_filter_key at src/app/navigation.rs:56",
        "TaskGraph cached computed fields can become stale at src/model/task.rs:11-23",
        "Test helper key() duplicated between module tests and integration tests",
        "Unnecessary Vec allocation in task flattening - use iterator nth() directly at src/app/navigation.rs:89-93",
        "Missing property-based tests for navigation invariants (idempotence, commutativity, bounds)",
        "Unclear filter mode Enter behavior - comment says exit but filter remains Some at src/app/navigation.rs:62-65"
      ]
    },
    {
      "id": "T7",
      "description": "Create hook script send_event.sh and implement hook install detection and installation logic",
      "agent": "code-implementer-agent",
      "wave": 2,
      "depends_on": [
        "T4"
      ],
      "spec_anchors": [
        "FR-070",
        "FR-071",
        "FR-072",
        "FR-073"
      ],
      "new_tests_required": true,
      "plan_context": "Phase 2: Bash hook + Rust install module.",
      "file_list": [
        "hooks/send_event.sh",
        "src/hook_install/mod.rs"
      ],
      "start_sha": "bac3a2ebcb2c0404f468f14531d2dc73a7c48fb2",
      "status": "completed",
      "tests_passed": true,
      "test_evidence": "cargo: 12 passed (hook_install)",
      "files_modified": [
        "/home/peterstorm/dev/rust/hooks/send_event.sh",
        "/home/peterstorm/dev/rust/src/hook_install/mod.rs",
        "/home/peterstorm/dev/rust/src/lib.rs"
      ],
      "new_tests_written": true,
      "new_test_evidence": "12 tests in src/hook_install/mod.rs",
      "review_status": "passed",
      "critical_findings": [],
      "advisory_findings": [
        "Shell script silently fails on missing jq dependency without visible error (hooks/send_event.sh:24)",
        "detect_hook does not validate hook script content, only existence and permissions (src/hook_install/mod.rs:49-76)",
        "Timestamp format uses second precision instead of milliseconds, causing ordering ambiguity (hooks/send_event.sh:71)",
        "Missing unit tests for error paths in install_hook (src/hook_install/mod.rs:110-135)",
        "Hook script does not validate TMPDIR path existence before use (hooks/send_event.sh:10)",
        "Module-level documentation missing to explain FC/IS boundary (src/hook_install/mod.rs:1-11)"
      ]
    },
    {
      "id": "T8",
      "description": "Implement file watchers for task_graph, transcripts, hook_events, active_agents with debouncing and integration tests",
      "agent": "code-implementer-agent",
      "wave": 3,
      "depends_on": [
        "T2",
        "T3",
        "T4"
      ],
      "spec_anchors": [
        "FR-001",
        "FR-002",
        "FR-003",
        "FR-004",
        "FR-020",
        "FR-021",
        "FR-022",
        "FR-023",
        "FR-026",
        "NFR-001",
        "NFR-012",
        "NFR-013",
        "SC-002"
      ],
      "new_tests_required": true,
      "plan_context": "Phase 3: Watcher layer (imperative shell) - notify-based with 100ms debouncing.",
      "file_list": [
        "src/watcher/mod.rs",
        "src/watcher/task_graph.rs",
        "src/watcher/transcripts.rs",
        "src/watcher/hook_events.rs",
        "src/watcher/active_agents.rs",
        "tests/watcher_integration.rs"
      ],
      "start_sha": "bac3a2ebcb2c0404f468f14531d2dc73a7c48fb2",
      "status": "completed",
      "tests_passed": true,
      "test_evidence": "cargo: 23 passed",
      "files_modified": [
        "/home/peterstorm/dev/rust/src/lib.rs",
        "/home/peterstorm/dev/rust/src/watcher/mod.rs",
        "/home/peterstorm/dev/rust/src/watcher/parsers.rs",
        "/home/peterstorm/dev/rust/src/watcher/tail.rs",
        "/home/peterstorm/dev/rust/tests/watcher_tests.rs"
      ],
      "new_tests_written": true,
      "new_test_evidence": "54 new test methods, 157 assertions (rust: 54 #[test])",
      "review_status": "passed",
      "critical_findings": [],
      "advisory_findings": [
        "Resource leak - watcher thread never terminates (src/watcher/mod.rs:56-61)",
        "Debounce implementation missing - poll_interval is not debouncing (src/watcher/mod.rs:46, NFR-012)",
        "Silent error swallowing on tx.send failures (src/watcher/mod.rs:121,152,177)",
        "Missing integration test for debounce behavior (tests/watcher_tests.rs)",
        "Agent ID extraction uses \"unknown\" fallback - violates parse-don't-validate (src/watcher/mod.rs:142-146,202-206)",
        "Duplicate error handling patterns across handlers (src/watcher/mod.rs:117-192)",
        "TailState documented for events.jsonl but never used (src/watcher/tail.rs:6-11, src/watcher/mod.rs:171)",
        "Missing watcher lifecycle integration tests (tests/watcher_tests.rs)",
        "Debounce documentation inconsistency - 200ms vs 100ms (mod.rs:18 vs plan AD-8)"
      ]
    },
    {
      "id": "T9",
      "description": "Implement session archive writer and reader with save, auto-save, list, load, delete and integration tests",
      "agent": "code-implementer-agent",
      "wave": 3,
      "depends_on": [
        "T2",
        "T4"
      ],
      "spec_anchors": [
        "FR-005",
        "FR-006",
        "FR-010",
        "FR-024",
        "FR-025"
      ],
      "new_tests_required": true,
      "plan_context": "Phase 3: Archive I/O boundary.",
      "file_list": [
        "src/archive/mod.rs",
        "src/archive/writer.rs",
        "src/archive/reader.rs",
        "tests/archive_integration.rs"
      ],
      "start_sha": "bac3a2ebcb2c0404f468f14531d2dc73a7c48fb2",
      "status": "completed",
      "tests_passed": true,
      "test_evidence": "cargo: 103 passed",
      "files_modified": [
        "/home/peterstorm/dev/rust/src/lib.rs",
        "/home/peterstorm/dev/rust/src/model/agent.rs",
        "/home/peterstorm/dev/rust/src/session/mod.rs",
        "/home/peterstorm/dev/rust/tests/session_tests.rs"
      ],
      "new_tests_written": true,
      "new_test_evidence": "28 new test methods, 51 assertions (rust: 28 #[test])",
      "review_status": "passed",
      "critical_findings": [],
      "advisory_findings": [
        "src/session/mod.rs:244 - auto_save_tick silently ignores save errors, should log failures for visibility",
        "src/session/mod.rs:191-194 - list_sessions silently skips corrupt files, should log skipped files with reason to alert user of potential data issues"
      ]
    },
    {
      "id": "T10",
      "description": "Implement dashboard view with header, footer, wave_river, task_list, event_stream, and banner components",
      "agent": "code-implementer-agent",
      "wave": 4,
      "depends_on": [
        "T2",
        "T5"
      ],
      "spec_anchors": [
        "FR-009",
        "FR-030",
        "FR-031",
        "FR-032",
        "FR-033",
        "FR-036",
        "FR-037",
        "FR-038",
        "FR-040",
        "NFR-020",
        "NFR-021",
        "NFR-023"
      ],
      "new_tests_required": true,
      "plan_context": "Phase 4: Dashboard view (pure rendering).",
      "file_list": [
        "src/view/dashboard.rs",
        "src/view/components/mod.rs",
        "src/view/components/header.rs",
        "src/view/components/footer.rs",
        "src/view/components/wave_river.rs",
        "src/view/components/task_list.rs",
        "src/view/components/event_stream.rs",
        "src/view/components/banner.rs",
        "tests/view_tests.rs"
      ],
      "start_sha": "bac3a2ebcb2c0404f468f14531d2dc73a7c48fb2",
      "status": "completed",
      "tests_passed": true,
      "test_evidence": "cargo: 25 passed",
      "files_modified": [
        "/home/peterstorm/dev/rust/src/view/components/event_stream.rs",
        "/home/peterstorm/dev/rust/src/view/components/footer.rs",
        "/home/peterstorm/dev/rust/src/view/components/header.rs",
        "/home/peterstorm/dev/rust/src/view/components/mod.rs",
        "/home/peterstorm/dev/rust/src/view/components/task_list.rs",
        "/home/peterstorm/dev/rust/src/view/components/wave_river.rs",
        "/home/peterstorm/dev/rust/src/view/dashboard.rs",
        "/home/peterstorm/dev/rust/src/view/mod.rs",
        "/home/peterstorm/dev/rust/tests/view_tests.rs"
      ],
      "new_tests_written": true,
      "new_test_evidence": "66 new test methods, 69 assertions (rust: 66 #[test])",
      "review_status": "passed",
      "critical_findings": [],
      "advisory_findings": [
        "Pure functions return owned data instead of borrowed for efficiency - header.rs:30, footer.rs:28, wave_river.rs:41, task_list.rs:37, event_stream.rs:43",
        "Layout magic numbers should be named constants at dashboard.rs:35-38,49",
        "Missing property-based tests for truncation logic at task_list.rs:63-67, event_stream.rs:134-139",
        "Comment describes layout but code duplicates it at dashboard.rs:16-30",
        "Test names don't follow consistent convention in tests/view_tests.rs",
        "Extract color logic to Theme methods - wave_river.rs:81-85, task_list.rs:53, event_stream.rs:98",
        "Consolidate duplicate status symbol mapping between wave_river.rs:100-108 and task_list.rs:93-101",
        "Missing test coverage for empty wave list, high retry counts, unicode truncation edge cases",
        "Reduce banner function nesting at banner.rs:14-20"
      ]
    },
    {
      "id": "T11",
      "description": "Implement agent detail view with tool_call_list and reasoning_panel components",
      "agent": "code-implementer-agent",
      "wave": 4,
      "depends_on": [
        "T2",
        "T5"
      ],
      "spec_anchors": [
        "FR-009",
        "FR-034",
        "FR-035",
        "FR-036",
        "FR-039",
        "FR-040",
        "SC-003"
      ],
      "new_tests_required": true,
      "plan_context": "Phase 4: Agent detail view (pure rendering).",
      "file_list": [
        "src/view/agent_detail.rs",
        "src/view/components/tool_call_list.rs",
        "src/view/components/reasoning_panel.rs"
      ],
      "start_sha": "bac3a2ebcb2c0404f468f14531d2dc73a7c48fb2",
      "status": "completed",
      "tests_passed": true,
      "test_evidence": "cargo: 26 passed (agent_detail + tool_call_list + reasoning_panel)",
      "files_modified": [
        "/home/peterstorm/dev/rust/src/lib.rs",
        "/home/peterstorm/dev/rust/src/view/agent_detail.rs",
        "/home/peterstorm/dev/rust/src/view/components/banner.rs",
        "/home/peterstorm/dev/rust/src/view/components/event_stream.rs",
        "/home/peterstorm/dev/rust/src/view/components/mod.rs",
        "/home/peterstorm/dev/rust/src/view/components/reasoning_panel.rs",
        "/home/peterstorm/dev/rust/src/view/components/task_list.rs",
        "/home/peterstorm/dev/rust/src/view/components/tool_call_list.rs",
        "/home/peterstorm/dev/rust/src/view/dashboard.rs",
        "/home/peterstorm/dev/rust/src/view/mod.rs"
      ],
      "new_tests_written": true,
      "new_test_evidence": "26 #[test] in view/agent_detail.rs, view/components/tool_call_list.rs, view/components/reasoning_panel.rs",
      "review_status": "passed",
      "critical_findings": [],
      "advisory_findings": [
        "I1: Duration calculation uses app start time instead of agent start time for active agents (src/view/agent_detail.rs:84-90)",
        "S1: Consider extracting status determination to Agent::status() method for better domain modeling (src/view/agent_detail.rs:78-82)",
        "S2: Extract magic number 3 as named constants (CHROME_HEIGHT = BORDER_HEIGHT + TITLE_HEIGHT) (tool_call_list.rs:47, reasoning_panel.rs:60)",
        "S3: Consider extracting tool status icon mapping to Theme::tool_status_icon() for reusability (src/view/components/tool_call_list.rs:55-59)",
        "S4: Auto-scroll logic could be extracted to separate function for clarity and testability (src/view/components/reasoning_panel.rs:66-75)"
      ]
    },
    {
      "id": "T12",
      "description": "Implement sessions view, filter_bar, help_overlay, and view dispatch",
      "agent": "code-implementer-agent",
      "wave": 4,
      "depends_on": [
        "T2",
        "T5"
      ],
      "spec_anchors": [
        "FR-009",
        "FR-025",
        "FR-040",
        "FR-057",
        "FR-058",
        "NFR-003"
      ],
      "new_tests_required": true,
      "plan_context": "Phase 4: Sessions view + overlays.",
      "file_list": [
        "src/view/sessions.rs",
        "src/view/mod.rs",
        "src/view/components/session_table.rs",
        "src/view/components/filter_bar.rs",
        "src/view/components/help_overlay.rs"
      ],
      "start_sha": "bac3a2ebcb2c0404f468f14531d2dc73a7c48fb2",
      "status": "completed",
      "tests_passed": true,
      "test_evidence": "cargo: 17 passed (sessions + filter_bar + help_overlay + view dispatch)",
      "files_modified": [
        "/home/peterstorm/dev/rust/src/lib.rs",
        "/home/peterstorm/dev/rust/src/view/components/filter_bar.rs",
        "/home/peterstorm/dev/rust/src/view/components/help_overlay.rs",
        "/home/peterstorm/dev/rust/src/view/components/mod.rs",
        "/home/peterstorm/dev/rust/src/view/dashboard.rs",
        "/home/peterstorm/dev/rust/src/view/mod.rs",
        "/home/peterstorm/dev/rust/src/view/sessions.rs",
        "/home/peterstorm/dev/rust/tests/view_tests.rs"
      ],
      "new_tests_written": true,
      "new_test_evidence": "17 #[test] in view/sessions.rs, view/components/filter_bar.rs, view/components/help_overlay.rs, tests/view_tests.rs",
      "review_status": "passed",
      "critical_findings": [],
      "advisory_findings": [
        "sessions.rs:46 - Wrong index variable name (selected_task_index instead of selected_session_index)",
        "sessions.rs:25 - Unused scroll offset variable with TODO comment",
        "filter_bar.rs:16-30 - Filter text needs sanitization before rendering",
        "sessions.rs:71-76 - Duplicate foreground color logic in nested style",
        "sessions.rs:55-60 - Extract status color mapping to separate function",
        "help_overlay.rs:96 - Consider moving centered_rect to shared layout module",
        "filter_bar.rs:30 - Static cursor without position tracking",
        "Test coverage - Limited assertions in rendering tests",
        "Type safety - Consider branded types for SessionId and ProjectPath",
        "view/mod.rs:17 - Inconsistent parameter order across render functions"
      ]
    },
    {
      "id": "T13",
      "description": "Wire main event loop with watchers, keyboard, tick, connect update and render, implement side effect dispatch, terminal init/restore, CLI args",
      "agent": "code-implementer-agent",
      "wave": 5,
      "depends_on": [
        "T5",
        "T6",
        "T7",
        "T8",
        "T9",
        "T10",
        "T11",
        "T12"
      ],
      "spec_anchors": [
        "FR-004",
        "NFR-002",
        "SC-001",
        "SC-006"
      ],
      "new_tests_required": true,
      "plan_context": "Phase 5: Main event loop (imperative shell).",
      "file_list": [
        "src/main.rs"
      ],
      "start_sha": "bac3a2ebcb2c0404f468f14531d2dc73a7c48fb2",
      "status": "completed",
      "tests_passed": true,
      "test_evidence": "cargo: 209 passed",
      "files_modified": [
        "/home/peterstorm/dev/rust/src/main.rs",
        "/home/peterstorm/dev/rust/tests/main_loop_tests.rs"
      ],
      "new_tests_written": true,
      "new_test_evidence": "13 new test methods, 35 assertions (rust: 13 #[test])",
      "review_status": "passed",
      "critical_findings": [],
      "advisory_findings": [
        "Incomplete side effect dispatch - only hook install handled, missing session load/delete [src/main.rs:98-109]",
        "Keyboard event handling bypasses update logic - side effect decisions duplicated outside pure update [src/main.rs:94-110]",
        "Missing error handling for watcher channel - try_recv ignores Disconnected error [src/main.rs:114]",
        "Quit logic could be simplified - single source of truth in update, remove duplication [src/main.rs:124-127]",
        "Tests don't cover event loop integration - run_event_loop function untested [tests/main_loop_tests.rs]",
        "Tick timeout edge case needs comment - zero timeout on overrun is expected behavior [src/main.rs:89-91]",
        "CLI args should use clap - plan specifies clap, current uses manual parsing [src/main.rs:24-28]",
        "Inconsistent error handling style - mix of expect and ? operator [src/main.rs:28,66]",
        "Missing context in error messages - which paths failed not specified [src/main.rs:48]"
      ]
    }
  ],
  "wave_gates": {
    "1": {
      "impl_complete": false,
      "tests_passed": true,
      "reviews_complete": true,
      "blocked": false
    },
    "2": {
      "impl_complete": true,
      "tests_passed": true,
      "reviews_complete": true,
      "blocked": false
    },
    "3": {
      "impl_complete": true,
      "tests_passed": true,
      "reviews_complete": true,
      "blocked": false
    },
    "4": {
      "impl_complete": true,
      "tests_passed": true,
      "reviews_complete": true,
      "blocked": false
    },
    "5": {
      "impl_complete": true,
      "tests_passed": true,
      "reviews_complete": true,
      "blocked": false
    }
  },
  "updated_at": "2026-02-11T06:05:39.680Z",
  "plan_title": "Rust TUI for multi-agent observability (loom-tui)",
  "current_wave": 5,
  "executing_tasks": [
    "T5",
    "T6",
    "T7",
    "T8",
    "T9",
    "T10",
    "T11",
    "T12",
    "T13",
    "T1"
  ],
  "github_repo": "peterstorm/loom-tui",
  "github_issue": 2,
  "spec_check": {
    "wave": 5,
    "run_at": "2026-02-11T20:31:05.323Z",
    "critical_count": 0,
    "high_count": 1,
    "critical_findings": [],
    "high_findings": [],
    "medium_findings": [],
    "verdict": "PASSED"
  }
}